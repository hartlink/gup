# Sistema de Internacionalización (i18n)

CliGO incluye un sistema de internacionalización que permite usar la aplicación en múltiples idiomas.

## Idiomas Soportados

- **Español (es)** - Idioma por defecto
- **English (en)**

## Uso

### Seleccionar Idioma

Puedes seleccionar el idioma de dos formas:

#### 1. Flag `--lang` o `-l`

```bash
# Español
./cligo --lang es
./cligo -l es

# English
./cligo --lang en
./cligo -l en

# Con cualquier comando
./cligo version --lang es
./cligo update --lang en
```

#### 2. Variable de Entorno

El CLI detecta automáticamente el idioma del sistema usando las variables `LANG` o `LANGUAGE`:

```bash
# Configurar español temporalmente
LANG=es_ES.UTF-8 ./cligo

# Configurar inglés temporalmente
LANG=en_US.UTF-8 ./cligo
```

## Agregar Nuevas Traducciones

### Paso 1: Agregar la clave en `pkg/i18n/i18n.go`

Edita el archivo `pkg/i18n/i18n.go` y agrega tu nueva traducción en ambos idiomas:

```go
var translations = map[Language]map[string]string{
	Spanish: {
		// ... traducciones existentes
		"mi.nueva.clave": "Mi texto en español",
	},
	English: {
		// ... traducciones existentes
		"mi.nueva.clave": "My text in English",
	},
}
```

### Paso 2: Usar la traducción en tu código

Importa el paquete i18n y usa la función `T()`:

```go
import "cligo/pkg/i18n"

func myFunction() {
	message := i18n.T("mi.nueva.clave")
	fmt.Println(message)
}
```

## Estructura de Claves

Las claves de traducción están organizadas por categoría:

- `app.*` - Información general de la aplicación
- `cmd.*` - Mensajes de comandos
- `update.*` - Comando update
- `demo.*` - Comando demo
- `version.*` - Comando version
- `root.*` - Comando root
- `flag.*` - Descripciones de flags
- `ui.*` - Mensajes de la interfaz de usuario
- `error.*` - Mensajes de error

## Ejemplo Completo

```go
package cmd

import (
	"fmt"
	"github.com/spf13/cobra"
	"cligo/pkg/i18n"
)

var myCmd = &cobra.Command{
	Use:   "mycommand",
	Short: i18n.T("mycommand.short"),
	Long:  i18n.T("mycommand.long"),
	Run: func(cmd *cobra.Command, args []string) {
		fmt.Println(i18n.T("mycommand.message"))
	},
}
```

## Agregar un Nuevo Idioma

### Paso 1: Agregar la constante del idioma

```go
const (
	Spanish Language = "es"
	English Language = "en"
	French  Language = "fr"  // Nuevo idioma
)
```

### Paso 2: Agregar traducciones

```go
var translations = map[Language]map[string]string{
	Spanish: { /* ... */ },
	English: { /* ... */ },
	French: {
		"app.name": "CliGO",
		"app.welcome": "Bienvenue à CliGO!",
		// ... todas las claves traducidas
	},
}
```

### Paso 3: Actualizar SetLanguage

```go
func SetLanguage(lang string) {
	lang = strings.ToLower(strings.TrimSpace(lang))
	switch lang {
	case "en", "english":
		currentLanguage = English
	case "es", "spanish", "español":
		currentLanguage = Spanish
	case "fr", "french", "français":
		currentLanguage = French
	default:
		currentLanguage = detectSystemLanguage()
	}
}
```

### Paso 4: Actualizar detectSystemLanguage (opcional)

```go
func detectSystemLanguage() Language {
	lang := os.Getenv("LANG")
	if lang == "" {
		lang = os.Getenv("LANGUAGE")
	}
	
	lang = strings.ToLower(lang)
	if strings.Contains(lang, "en") {
		return English
	}
	if strings.Contains(lang, "fr") {
		return French
	}
	
	return Spanish  // Idioma por defecto
}
```

## Buenas Prácticas

1. **Usar claves descriptivas**: `update.description` en lugar de `ud`
2. **Mantener consistencia**: Usa el mismo formato para claves similares
3. **Traducir todo**: No dejes textos hardcodeados en el código
4. **Probar ambos idiomas**: Verifica que todas las traducciones funcionen
5. **Comentar traducciones complejas**: Si una traducción es difícil, agrega un comentario

## Testing

Prueba cada comando en ambos idiomas:

```bash
# Español
./cligo --lang es
./cligo version --lang es
./cligo demo --lang es

# English
./cligo --lang en
./cligo version --lang en
./cligo demo --lang en
```